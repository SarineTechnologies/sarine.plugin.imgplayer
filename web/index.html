<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>imgplay</title>
        
        <!-- Add CSS inside header -->
        <link href="http://localhost:3000/content/viewers/atomic/v1/assets/sarine.plugin.imgplayer.min.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <body>
        <h1>imgplay</h1>
        <!-- container of the image player -->
        <div id="imageplayer"></div>
        
        <!-- Add JavaScript at bottom -->
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.1.min.js"></script>
        <script type="text/javascript" src="http://localhost:3000/content/viewers/atomic/v1/assets/sarine.plugin.imgplayer.min.js"></script>
        <script type="text/javascript">
            (function($) {

                (function (cb) {
                    var webP = new Image();
                    webP.onload = webP.onerror = function () {                        
                        cb(webP.height == 2); // if true then WebP
                    };
                    webP.src = 'data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA';     
                })(loadImages);
                
                function loadImages (isWebP) {
                    
                    // var path = isWebP ? 'webp_' : 'jpeg_';
                    // var format = isWebP ? '.jpg.webp': '.jpg';
                    // var url = 'https://d3oayecwxm3wp6.cloudfront.net/qa3/demo/new_loupe_poc/' + path + '318_80_452px/Image_{num}' + format;
                    
                    var path = isWebP ? '452_webp' : '452_jpeg';
                    var format = isWebP ? '.webp': '.jpg';
                    var url = 'https://d3oayecwxm3wp6.cloudfront.net/qa3/demo/new_loupe_poc/convention/Pavilion/' + path + '/img{num}' + format;

                    $('#imageplayer')
                        .imgplay({
                            startImage: 0,
                            // startImage: 1,
                            totalImages: 318,
                            imageName: 'img{num}' + format,                            
                            // imageName: 'Image_{num}' + format,                            
                            urlDir: url,
                            rate: 30,
                            height: 452,
                            width: 452,
                            autoPlay: true 
                        })
                        .on("play", function (event, plugin) {
                        })
                        .on("pause", function (event, plugin) {
                        })
                        .on("stop", function (event, plugin) {                           
                        });

                    // play on demand
                    // make sure that imgplay option autoPlay is false 
                    // $('#imageplayer').data('imgplay').play();    
                }

            })(jQuery);
        </script>
    </body>
</html>
